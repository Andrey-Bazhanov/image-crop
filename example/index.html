<!DOCTYPE html>
<html>
	<head>
		<title>
			Imagecropper 0.1
		</title>
		<!-- META -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <!-- STYLES -->
	    <link rel="stylesheet" href="../build/imagecrop.min.css">
	    <style type="text/css">
		    body {
				background-color: #c9c9c9;
			}
		</style>
	</head>
	<body>
		<!-- ENTER CONTENT -->
		<div class="test-imagecrop"></div>
		<button type="button" class="crop-button">
			<span>Crop!</span>
		</button>
		<div class="preview"></div>
		<!-- SCRIPTS -->
		<script type="text/javascript" src="../src/js/imagecrop.js"></script>
		<script type="text/javascript">
		window.onload = function() {
			var dimensions = null;

			var onUpdateHandler = function (dim) {
				dimensions = dim;
			};

			var onCropHandler = function() {
				var img = new Image();
				img.src = img_c.crop('image/jpeg', 1);
				img.width = dimensions.w;
				img.height = dimensions.h;
				var target = document.querySelector('.preview');
				while(target.firstChild) {
					target.removeChild(target.firstChild)
				}
				target.appendChild(img);
			}			

			var img_c = new ImageCropper('.test-imagecrop', 'img.jpg', {
				update: onUpdateHandler
			});

			var button = document.querySelector('.crop-button');
			button.addEventListener('click', onCropHandler);
		}
		</script>
	</body>
</html>